---
import { Image } from "astro:assets";
import GithubIllustration from "../assets/github-repos.png";
import ButtonAlt from "./ButtonAlt.astro";
const title = "Projects on GitHub";
const body =
  "Whether it's a personal project or a contribution to an open source project, I love to build stuff. These days I'm mostly working with Astro, React, and Tailwind CSS but I'm always looking to learn new things. Check out some of my projects below.";

const buttonTwoText = "My GitHub Profile";
const buttonTwoLink = "https://www.github.com/leabs";

import IndicatorCount from "./IndicatorCount.astro";
//fetch number of repos and export to the markup below
const repoCount = await fetch(
  "https://api.github.com/users/leabs/repos?page=1&per_page=100"
)
  .then((res) => res.json())
  .then((data) => data.length);
---

<section class="bg-stone-100 dark:bg-slate-800">
  <div
    class="github-cta grid max-w-screen-xl px-4 py-8 mx-auto lg:gap-8 xl:gap-0 lg:py-16 lg:grid-cols-12"
  >
    <div class="mr-auto place-self-center lg:col-span-7">
      <h1
        class="max-w-2xl mb-4 text-4xl font-extrabold tracking-tight leading-none md:text-5xl xl:text-6xl dark:text-white"
      >
        {title}
      </h1>
      <p
        class="max-w-2xl mb-6 font-light text-gray-500 lg:mb-8 md:text-lg lg:text-xl dark:text-gray-400"
      >
        {body}
      </p>
      <IndicatorCount
        button="GitHub Repos"
        count={repoCount}
        href="https://github.com/leabs?tab=repositories"
      />
      <span class="mr-4"></span>
      <ButtonAlt text={buttonTwoText} href={buttonTwoLink} />
    </div>
    <div class="mt-4 lg:mt-0 lg:col-span-5 lg:flex">
      <Image
        src={GithubIllustration}
        alt="GitHub Logo"
        width="1024"
        height="739"
      />
    </div>
  </div>
</section>

<style>
  @media (max-width: 1023px) {
    .github-cta {
      grid-column: 2;
      grid-row: 1;
    }
  }
</style>
